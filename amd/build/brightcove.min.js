define ("mod_html5player/brightcove",["jquery","core/ajax"],function(a,b){var c,d=function(a,b){window.require.config({paths:{bc:"https://players.brightcove.net/".concat(a,"/").concat(b,"_default/index.min")},waitSeconds:30})},e=function(a,c,d){var e=b.call([{methodname:"mod_html5player_set_module_progress",args:{id:a,videoid:c,progress:d}}]);e[0].then(function(a){console.info("Video completed : ".concat(a.completed))}).fail(function(a){console.log(a)})},f=function(a,c,d){var e;console.info("Geting course video progress from store...");e=b.call([{methodname:"mod_html5player_get_module_progress",args:{id:+c,videoid:+d}}]);e[0].then(function(b){console.info("Fetched result from store");var c=b.progress;if(c){console.info("Video progress is ".concat(c,"ms"));var d=b.progress/1e3;a.currentTime(d)}else{console.info("Video progress is null")}}).fail(function(a){console.log(a)})},g=function(a,b,c){a.on("loadedmetadata",function(){f(a,b,c)})},h=function(a,b){var d=b.course,f=b.cmid,g=b.video_id;a.on("play",function(){console.info("Video started playing...");g=a.mediainfo.id;c=setInterval(function(){var b=a.currentTime();console.log("Video playing. Video current progress is : ".concat(b));e(f,g,b)},+b.progress_interval)});a.on("pause",function(){clearInterval(c)});a.on("ended",function(){var b=a.duration();console.log("Video ended...");e(f,g,b);clearInterval(c)})};return{init:function initBrightCovePlayer(a){a=JSON.parse(a);d(a.account_id,a.player_id);require(["bc"],function(){console.info("Brightcove player js loaded...");if(a.is_student){var b=videojs.getPlayer("brightcove-player-".concat(a.player_id));console.info("Player meta data loaded...");g(b,a.cmid,a.video_id);h(b,a)}})}}});
//# sourceMappingURL=brightcove.min.js.map
